import{resourceEngines}from"./searchEngines.js";import{currentMode,setCurrentEngine}from"./modeManager.js";import{resources}from"./dataManager.js";function updateEngineDropdown(){const n=document.getElementById("engineDropdown");if(n.innerHTML="","translate"===currentMode)n.innerHTML='\n            <div class="engine-option" data-engine="google" data-display-name="Google翻译">\n                <div class="engine-icon google-icon"></div>\n                <span class="engine-name">Google翻译</span>\n            </div>\n            <div class="engine-option" data-engine="bing" data-display-name="Bing翻译">\n                <div class="engine-icon bing-icon"></div>\n                <span class="engine-name">Bing翻译</span>\n            </div>\n            <div class="engine-option" data-engine="deepl" data-display-name="DeepL">\n                <div class="engine-icon deepl-icon"></div>\n                <span class="engine-name">DeepL</span>\n            </div>\n            <div class="engine-option" data-engine="baidu" data-display-name="百度翻译">\n                <div class="engine-icon baidu-icon"></div>\n                <span class="engine-name">百度翻译</span>\n            </div>\n            <div class="engine-option" data-engine="yandex" data-display-name="Yandex翻译">\n                <div class="engine-icon yandex-icon"></div>\n                <span class="engine-name">Yandex翻译</span>\n            </div>\n        ';else if("resource"===currentMode){let e='\n            <div class="engine-option" data-engine="zhihu" data-display-name="知乎">\n                <div class="engine-icon zhihu-icon"></div>\n                <span class="engine-name">知乎</span>\n            </div>\n            <div class="engine-option" data-engine="wikipedia" data-display-name="Wikipedia">\n                <div class="engine-icon wikipedia-icon"></div>\n                <span class="engine-name">Wikipedia</span>\n            </div>\n            <div class="engine-option" data-engine="weibo" data-display-name="微博">\n                <div class="engine-icon weibo-icon"></div>\n                <span class="engine-name">微博</span>\n            </div>\n            <div class="engine-option" data-engine="xiaohongshu" data-display-name="小红书">\n                <div class="engine-icon xiaohongshu-icon"></div>\n                <span class="engine-name">小红书</span>\n            </div>\n            <div class="engine-option" data-engine="reddit" data-display-name="Reddit">\n                <div class="engine-icon reddit-icon"></div>\n                <span class="engine-name">Reddit</span>\n            </div>\n            <div class="engine-option" data-engine="x" data-display-name="X">\n                <div class="engine-icon x-icon"></div>\n                <span class="engine-name">X</span>\n            </div>\n            <div class="engine-option" data-engine="bilibili" data-display-name="哔哩哔哩">\n                <div class="engine-icon bilibili-icon"></div>\n                <span class="engine-name">哔哩哔哩</span>\n            </div>\n            <div class="engine-option" data-engine="douyin" data-display-name="抖音">\n                <div class="engine-icon douyin-icon"></div>\n                <span class="engine-name">抖音</span>\n            </div>\n            <div class="engine-option" data-engine="kuaishou" data-display-name="快手">\n                <div class="engine-icon kuaishou-icon"></div>\n                <span class="engine-name">快手</span>\n            </div>\n            <div class="engine-option" data-engine="taobao" data-display-name="淘宝">\n                <div class="engine-icon taobao-icon"></div>\n                <span class="engine-name">淘宝</span>\n            </div>\n            <div class="engine-option" data-engine="amazon" data-display-name="Amazon">\n                <div class="engine-icon amazon-icon"></div>\n                <span class="engine-name">Amazon</span>\n            </div>\n            <div class="engine-option" data-engine="jingdong" data-display-name="京东">\n                <div class="engine-icon jingdong-icon"></div>\n                <span class="engine-name">京东</span>\n            </div>\n        ';resources.forEach((n,i)=>{const a=`custom_${i}`,s=n.url;resourceEngines[a]=s,e+=`\n                <div class="engine-option" data-engine="${a}" data-display-name="${n.name}">\n                    <div class="engine-icon" style="background-image: url('${n.faviconUrl||'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><text x="8" y="12" font-size="12" text-anchor="middle" fill="%23666">📂</text></svg>'}')"></div>\n                    <span class="engine-name">${n.name}</span>\n                </div>\n            `}),n.innerHTML=e}else n.innerHTML='\n            <div class="engine-option" data-engine="google" data-display-name="Google">\n                <div class="engine-icon google-icon"></div>\n                <span class="engine-name">Google</span>\n            </div>\n            <div class="engine-option" data-engine="bing" data-display-name="Bing">\n                <div class="engine-icon bing-icon"></div>\n                <span class="engine-name">Bing</span>\n            </div>\n            <div class="engine-option" data-engine="baidu" data-display-name="百度">\n                <div class="engine-icon baidu-icon"></div>\n                <span class="engine-name">百度</span>\n            </div>\n            <div class="engine-option" data-engine="yandex" data-display-name="Yandex">\n                <div class="engine-icon yandex-icon"></div>\n                <span class="engine-name">Yandex</span>\n            </div>\n            <div class="engine-option" data-engine="duckduckgo" data-display-name="DuckDuckGo">\n                <div class="engine-icon duckduckgo-icon"></div>\n                <span class="engine-name">DuckDuckGo</span>\n            </div>\n            <div class="engine-option" data-engine="ecosia" data-display-name="Ecosia">\n                <div class="engine-icon ecosia-icon"></div>\n                <span class="engine-name">Ecosia</span>\n            </div>\n            <div class="engine-option" data-engine="yahoo" data-display-name="Yahoo!">\n                <div class="engine-icon yahoo-icon"></div>\n                <span class="engine-name">Yahoo!</span>\n            </div>\n            <div class="engine-option" data-engine="brave" data-display-name="Brave">\n                <div class="engine-icon brave-icon"></div>\n                <span class="engine-name">Brave</span>\n            </div>\n            <div class="engine-option" data-engine="qwant" data-display-name="Qwant">\n                <div class="engine-icon qwant-icon"></div>\n                <span class="engine-name">Qwant</span>\n            </div>\n            <div class="engine-option" data-engine="aol" data-display-name="AOL">\n                <div class="engine-icon aol-icon"></div>\n                <span class="engine-name">AOL</span>\n            </div>\n        '}function toggleEngineDropdown(){const n=document.getElementById("engineDropdown"),e=document.getElementById("suggestionsContainer");n.classList.toggle("show"),n.classList.contains("show")?e.style.opacity="0.3":e.style.opacity=""}function selectEngine(n,e){setCurrentEngine(n);const i=document.querySelector(".engine-selector"),a=i.querySelector(".engine-icon"),s=i.querySelector(".engine-name");if("resource"===currentMode&&n.startsWith("custom_")){const e=parseInt(n.replace("custom_",""));if(e>=0&&e<resources.length){const n=resources[e];a.className="engine-icon",a.style.backgroundImage=`url('${n.faviconUrl||'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><text x="8" y="12" font-size="12" text-anchor="middle" fill="%23666">📂</text></svg>'}')`}}else a.className="engine-icon "+n+"-icon",a.style.backgroundImage="";s&&(s.textContent=e);const d=document.getElementById("engineDropdown");if(d){d.classList.remove("show");document.getElementById("suggestionsContainer").style.opacity=""}}export{updateEngineDropdown,toggleEngineDropdown,selectEngine};