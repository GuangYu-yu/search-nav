function setWallpaper(e){let t="";if(e.startsWith("gradient")){const r=parseInt(e.replace("gradient",""))-1,o=getGradientPairs();if(r>=0&&r<o.length){const[e,a]=o[r];t=`linear-gradient(135deg, ${e} 0%, ${a} 100%)`}}const r=document.getElementById("wallpaperContainer");t?(r.style.background=t,localStorage.setItem("customWallpaper",t)):(r.style.background="",localStorage.removeItem("customWallpaper"))}function setCustomWallpaper(){const e=document.getElementById("customWallpaperUrl").value.trim();if(!e)return void alert("请输入图片URL");const t=new Image;t.onload=function(){const t=`url('${e}') center/cover no-repeat`;document.getElementById("wallpaperContainer").style.background=t,localStorage.setItem("customWallpaper",t),localStorage.setItem("customWallpaperUrl",e)},t.onerror=function(){console.log("图片加载失败，请检查URL是否正确")},t.src=e}function getCurrentDirection(){const e=document.querySelector(".direction-btn.active");return e?e.dataset.direction:"135deg"}function updateGradientPreview(){const e=document.getElementById("color1").value,t=document.getElementById("color2").value,r=`linear-gradient(${getCurrentDirection()}, ${e} 0%, ${t} 100%)`;document.getElementById("gradientPreview").style.background=r}function getAllColors(){return["#667eea","#764ba2","#f093fb","#f5576c","#4ecdc4","#44a08d","#ff6b6b","#45b7d1","#96c93d","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#10ac84","#ee5a24","#0abde3","#006ba6","#f38ba8","#a8e6cf","#ffd93d","#6c5ce7"]}function getGradientPairs(){const e=getAllColors();return[[e[0],e[1]],[e[2],e[3]],[e[4],e[5]],[e[6],e[7]],[e[0],e[2]]]}function randomColors(){const e=getAllColors(),t=e[Math.floor(Math.random()*e.length)];let r=e[Math.floor(Math.random()*e.length)];for(;r===t;)r=e[Math.floor(Math.random()*e.length)];document.getElementById("color1").value=t,document.getElementById("color2").value=r;const o=["135deg","45deg","90deg","0deg"],a=o[Math.floor(Math.random()*o.length)];document.querySelectorAll(".direction-btn").forEach(e=>{e.classList.toggle("active",e.dataset.direction===a)}),updateGradientPreview()}function updateSVGWallpaper(){const e=document.getElementById("svgCode").value,t=document.getElementById("svgWallpaper");if(t&&t.remove(),!e||""===e.trim()){const e=localStorage.getItem("customWallpaper");if(e){document.getElementById("wallpaperContainer").style.background=e}else setWallpaper("default");return void localStorage.removeItem("svgWallpaper")}const r=document.getElementById("wallpaperContainer"),o=document.createElement("div");o.id="svgWallpaper",o.className="svg-wallpaper";try{const t=(new DOMParser).parseFromString(e,"image/svg+xml"),a=t.querySelector("parsererror");if(a)throw new Error("SVG解析错误："+a.textContent);const n=t.documentElement;if("svg"!==n.nodeName)throw new Error("请输入有效的SVG代码");n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("preserveAspectRatio","xMidYMid slice"),o.appendChild(n),r.appendChild(o),r.style.background="",localStorage.setItem("svgWallpaper","active")}catch(e){console.error("SVG代码错误：",e.message),o.remove()}}function applyCustomGradient(){const e=document.getElementById("color1").value,t=document.getElementById("color2").value,r=`linear-gradient(${getCurrentDirection()}, ${e} 0%, ${t} 100%)`;document.getElementById("wallpaperContainer").style.background=r,localStorage.setItem("customWallpaper",r)}function initColorMixer(){document.querySelectorAll(".direction-btn").forEach(e=>{e.addEventListener("click",function(){document.querySelectorAll(".direction-btn").forEach(e=>e.classList.remove("active")),this.classList.add("active"),updateGradientPreview()})}),document.getElementById("color1").addEventListener("input",updateGradientPreview),document.getElementById("color2").addEventListener("input",updateGradientPreview),updateGradientPreview()}export{setWallpaper,setCustomWallpaper,getCurrentDirection,updateGradientPreview,getAllColors,getGradientPairs,randomColors,updateSVGWallpaper,applyCustomGradient,initColorMixer};